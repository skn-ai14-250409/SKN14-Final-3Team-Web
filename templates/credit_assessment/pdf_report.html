<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ customer_name }}_여신심사보고서</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <style>
        @page {
            margin: 15mm;
            size: A4;
        }
        
        /* PDF 전용 스타일 */
        body {
            font-family: "Noto Sans KR", "Malgun Gothic", sans-serif;
            background: #f8f9fa;
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }
        
                .pdf-header {
                    background: #ffffff;
                    border-radius: 8px;
                    padding: 20px;
                    margin-bottom: 20px;
                    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
                }
        
                .pdf-header-top {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-bottom: 15px;
                    padding-bottom: 12px;
                    border-bottom: 1px solid #f3f4f6;
                }
        
        .pdf-logo-section {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .pdf-logo {
            width: 40px;
            height: 40px;
            background: #1f2937;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 14px;
        }
        
        .pdf-bank-info h1 {
            font-size: 18px;
            font-weight: 700;
            color: #1f2937;
            margin: 0;
            margin-bottom: 3px;
        }
        
        .pdf-bank-info .bank-subtitle {
            font-size: 12px;
            color: #6b7280;
            margin: 0;
        }
        
        .pdf-report-info {
            text-align: right;
        }
        
        .pdf-report-info .report-type {
            font-size: 16px;
            font-weight: 600;
            color: #1f2937;
            margin: 0;
            margin-bottom: 5px;
        }
        
        .pdf-report-info .report-date {
            font-size: 12px;
            color: #6b7280;
            margin: 0;
        }
        
                .pdf-header-main {
                    display: grid;
                    grid-template-columns: 1fr 1fr;
                    gap: 15px;
                }
        
                .pdf-customer-section {
                    background: #f9fafb;
                    padding: 12px;
                    border-radius: 6px;
                }
        
                .pdf-customer-section h3 {
                    font-size: 13px;
                    font-weight: 600;
                    color: #1f2937;
                    margin: 0 0 8px 0;
                }
        
                .pdf-customer-info {
                    display: grid;
                    grid-template-columns: 1fr 1fr;
                    gap: 8px;
                }
        
        .pdf-customer-item {
            display: flex;
            flex-direction: column;
            gap: 3px;
        }
        
        .pdf-customer-label {
            font-size: 10px;
            color: #6b7280;
            font-weight: 500;
        }
        
        .pdf-customer-value {
            font-size: 12px;
            color: #1f2937;
            font-weight: 600;
        }
        
                .pdf-officer-section {
                    background: #f0f9ff;
                    padding: 12px;
                    border-radius: 6px;
                }
        
                .pdf-officer-section h3 {
                    font-size: 13px;
                    font-weight: 600;
                    color: #1f2937;
                    margin: 0 0 8px 0;
                }
        
                .pdf-officer-info {
                    display: grid;
                    grid-template-columns: 1fr 1fr;
                    gap: 8px;
                }
        
        .pdf-officer-item {
            display: flex;
            flex-direction: column;
            gap: 3px;
        }
        
        .pdf-officer-label {
            font-size: 10px;
            color: #6b7280;
            font-weight: 500;
        }
        
        .pdf-officer-value {
            font-size: 12px;
            color: #1f2937;
            font-weight: 600;
        }
        
        .pdf-footer {
            margin-top: 40px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            text-align: center;
            color: #666;
            font-size: 14px;
        }
        
        .pdf-footer p {
            margin: 5px 0;
        }
        
        /* assessment_results_column.css의 모든 스타일을 직접 포함 */
        @keyframes fadeIn {
          from {
            opacity: 0;
          }
          to {
            opacity: 1;
          }
        }
        
        * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
        }
        
        .third_column {
          background: white;
          border-radius: 12px;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
          overflow: hidden;
          min-height: 0;
          padding: 1.25rem;
          display: flex;
          flex-direction: column;
          gap: 0.625rem;
          overflow-y: auto;
          overflow-x: hidden;
          width: 100%;
        }
        
        .third_column .assessment_results {
          display: flex;
          flex-direction: column;
          width: 100%;
          gap: 0.625rem;
        }
        
        .third_column .assessment_results .results_header {
          display: flex;
          gap: 0.5rem;
          height: 1.875rem;
          font-size: 0.875rem;
          font-weight: 600;
          margin-bottom: 0.625rem;
        }
        
        .third_column .assessment_results .results_header .header_icon {
          font-size: 0.875rem;
          color: #392e1b;
        }
        
        .third_column .assessment_results .section_title {
          font-size: 0.75rem;
          font-weight: 600;
          color: #333;
          margin-bottom: 0.5rem;
          padding-bottom: 0.25rem;
          border-bottom: 1px solid #e2e1e0;
        }
        
        .third_column .assessment_results .results_content {
          display: flex;
          flex-direction: column;
          gap: 0.625rem;
        }
        
        .third_column .assessment_results .assessment_summary {
          display: grid;
          grid-template-columns: 1fr 1fr 1fr 1fr;
          gap: 0.75rem;
          margin-bottom: 1rem;
          padding: 1.25rem 2.5rem;
        }
        
        .third_column .assessment_results .assessment_summary .summary_card {
          background: white;
          border: 1px solid #e2e1e0;
          border-radius: 0.5rem;
          padding: 0.75rem;
          text-align: center;
        }
        
        .third_column .assessment_results .assessment_summary .summary_card .summary_label {
          font-size: 0.6875rem;
          color: #666;
          margin-bottom: 0.25rem;
        }
        
        .third_column .assessment_results .assessment_summary .summary_card .summary_value {
          font-size: 0.875rem;
          font-weight: 600;
          color: #333;
        }
        
        .third_column .assessment_results .assessment_summary .summary_card .summary_value.credit_score {
          color: #10b981;
        }
        
        .third_column .assessment_results .assessment_summary .summary_card .summary_value.credit_rating {
          color: #3b82f6;
        }
        
        .third_column .assessment_results .assessment_summary .summary_card .summary_value.approval_status.approved {
          color: #10b981;
        }
        
        .third_column .assessment_results .assessment_summary .summary_card .summary_value.approval_status.rejected {
          color: #ef4444;
        }
        
        .third_column .assessment_results .assessment_details {
          display: flex;
          flex-direction: column;
          gap: 0.625rem;
        }
        
        .third_column .assessment_results .assessment_details .detail_section {
          margin-bottom: 1rem;
          display: flex;
          flex-direction: column;
          gap: 0.625rem;
        }
        
        .third_column .assessment_results .assessment_details .detail_section .section_title {
          font-size: 0.75rem;
          font-weight: 600;
          color: #333;
          margin-bottom: 0.5rem;
          padding-bottom: 0.25rem;
          border-bottom: 1px solid #e2e1e0;
        }
        
        .third_column .assessment_results .assessment_details .detail_section .credit_score_grid {
          display: grid;
          grid-template-columns: 1fr 2fr;
          padding: 1.25rem 2.5rem;
          gap: 1.25rem;
        }
        
        .third_column .assessment_results .assessment_details .detail_section .credit_score_grid .credit_score_graph_container {
          display: block;
          flex-direction: column;
          justify-content: center;
          align-items: center;
          gap: 0.5rem;
          width: 17.5rem;
        }
        
        .third_column .assessment_results .assessment_details .detail_section .credit_score_grid .credit_score_graph_container #credit_score_chart_container {
          display: flex;
          align-items: center;
          justify-content: center;
          padding-bottom: 1.5625rem;
        }
        
        .third_column .assessment_results .assessment_details .detail_section .credit_score_detail {
          font-size: 0.75rem;
          font-weight: 600;
          color: #333;
          display: flex;
          align-items: center;
          justify-content: center;
        }
        
        .third_column .assessment_results .assessment_details .detail_section .credit_score_discription_container {
          display: flex;
          align-items: center;
          justify-content: center;
        }
        
        .third_column .assessment_results .assessment_details .detail_section .credit_score_discription {
          color: #333;
          font-size: 0.6875rem;
          line-height: 1.6;
          width: 80%;
        }
        
        .third_column .assessment_results .assessment_details .detail_section .credit_score_discription .description_main {
          font-size: 0.75rem;
          font-weight: 600;
          color: #333;
          margin-bottom: 0.5rem;
        }
        
        .third_column .assessment_results .assessment_details .detail_section .credit_score_discription .description_main strong {
          color: #10b981;
        }
        
        .third_column .assessment_results .assessment_details .detail_section .credit_score_discription .description_detail {
          font-size: 0.6875rem;
          color: #333;
          margin-bottom: 0.625rem;
          line-height: 1.5;
        }
        
        .third_column .assessment_results .assessment_details .detail_section .credit_score_discription .description_benefit {
          font-size: 0.625rem;
          color: #065e42;
          font-weight: 400;
          background: rgba(16, 185, 129, 0.1);
          padding: 0.5rem 0.75rem;
          border-radius: 0.375rem;
          margin-bottom: 0.5rem;
        }
        
        .third_column .assessment_results .assessment_details .detail_section .credit_score_discription .description_benefit strong {
          color: #065e42;
        }
        
        .third_column .assessment_results .assessment_details .detail_section .credit_score_discription .description_note {
          font-size: 0.5625rem;
          color: #666;
          border-top: 1px solid rgba(102, 102, 102, 0.2);
          padding-top: 0.375rem;
        }
        
        .third_column .assessment_results .assessment_details .detail_section .risk_analysis_grid {
          display: grid;
          grid-template-columns: 1fr 2fr;
          gap: 0.75rem;
          padding: 0.625rem 2.5rem;
        }
        
        .third_column .assessment_results .assessment_details .detail_section .risk_analysis_grid .risk_analysis_graph_container {
          display: flex;
          justify-content: center;
          align-items: center;
        }
        
        .third_column .assessment_results .assessment_details .detail_section .risk_analysis_detail {
          font-size: 0.75rem;
          font-weight: 600;
          color: #333;
          display: flex;
          align-items: center;
          justify-content: center;
        }
        
        .third_column .assessment_results .assessment_details .detail_section .risk_analysis_discription_container {
          display: flex;
          align-items: center;
          justify-content: center;
        }
        
        .third_column .assessment_results .assessment_details .detail_section .risk_analysis_discription {
          color: #333;
          font-size: 0.6875rem;
          line-height: 1.6;
          width: 80%;
        }
        
        .third_column .assessment_results .assessment_details .detail_section .risk_analysis_discription .description_main {
          font-size: 0.75rem;
          font-weight: 600;
          color: #333;
          margin-bottom: 0.5rem;
        }
        
        .third_column .assessment_results .assessment_details .detail_section .risk_analysis_discription .description_main strong {
          color: #10b981;
        }
        
        .third_column .assessment_results .assessment_details .detail_section .risk_analysis_discription .description_detail {
          font-size: 0.6875rem;
          color: #333;
          margin-bottom: 0.625rem;
          line-height: 1.5;
        }
        
        .third_column .assessment_results .assessment_details .detail_section .risk_analysis_discription .description_benefit {
          font-size: 0.625rem;
          color: #065e42;
          font-weight: 400;
          background: rgba(16, 185, 129, 0.1);
          padding: 0.5rem 0.75rem;
          border-radius: 0.375rem;
          margin-bottom: 0.5rem;
        }
        
        .third_column .assessment_results .assessment_details .detail_section .risk_analysis_discription .description_benefit strong {
          color: #065e42;
        }
        
        .third_column .assessment_results .assessment_details .detail_section .risk_analysis_discription .description_note {
          font-size: 0.5625rem;
          color: #666;
          border-top: 1px solid rgba(102, 102, 102, 0.2);
          padding-top: 0.375rem;
        }
        
        .third_column .assessment_results .assessment_details .detail_section .detail_grid {
          display: grid;
          grid-template-columns: 1fr 1fr 1fr;
          gap: 0.5rem;
          padding: 1.25rem 2.5rem;
        }
        
        .third_column .assessment_results .assessment_details .detail_section .detail_grid .detail_item {
          display: flex;
          flex-direction: column;
          gap: 0.25rem;
          padding: 0.5rem;
          background: #f8f8f8;
          border-radius: 0.25rem;
          font-size: 0.6875rem;
        }
        
        .third_column .assessment_results .assessment_details .detail_section .detail_grid .detail_item .detail_header {
          display: flex;
          justify-content: space-between;
          align-items: center;
        }
        
        .third_column .assessment_results .assessment_details .detail_section .detail_grid .detail_item .detail_label {
          color: #666;
        }
        
        .third_column .assessment_results .assessment_details .detail_section .detail_grid .detail_item .detail_value {
          color: #333;
          font-weight: 600;
        }
        
        .third_column .assessment_results .assessment_details .detail_section .detail_grid .detail_item .progress_bar {
          width: 100%;
          height: 0.25rem;
          background: rgba(102, 102, 102, 0.2);
          border-radius: 0.125rem;
          overflow: hidden;
          position: relative;
        }
        
        .third_column .assessment_results .assessment_details .detail_section .detail_grid .detail_item .progress_bar .progress_fill {
          height: 100%;
          background: linear-gradient(90deg, #10b981 0%, #3b82f6 100%);
          border-radius: 0.125rem;
          transition: width 0.3s ease;
          position: relative;
        }
        
        .third_column .assessment_results .ai_analysis_content {
          padding: 1.25rem 2.5rem;
        }
        
        .third_column .assessment_results .ai_analysis_content .analysis_summary {
          display: flex;
          align-items: center;
          gap: 1.25rem;
          padding: 1rem;
          background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(16, 185, 129, 0.05) 100%);
          border-radius: 0.5rem;
          margin-bottom: 1.25rem;
        }
        
        .third_column .assessment_results .ai_analysis_content .analysis_summary .summary_icon {
          flex-shrink: 0;
          width: 2.5rem;
          height: 2.5rem;
          background: #10b981;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
        }
        
        .third_column .assessment_results .ai_analysis_content .analysis_summary .summary_icon i {
          font-size: 1.25rem;
          color: white;
          display: flex;
          align-items: center;
          justify-content: center;
        }
        
        .third_column .assessment_results .ai_analysis_content .analysis_summary .summary_text {
          flex: 1;
        }
        
        .third_column .assessment_results .ai_analysis_content .analysis_summary .summary_text .summary_title {
          font-size: 0.875rem;
          font-weight: 700;
          color: #065e42;
          margin-bottom: 0.25rem;
        }
        
        .third_column .assessment_results .ai_analysis_content .analysis_summary .summary_text .summary_description {
          font-size: 0.6875rem;
          color: #374151;
          line-height: 1.4;
        }
        
        .third_column .assessment_results .ai_analysis_content .analysis_details {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 0.75rem;
          margin-bottom: 1.25rem;
        }
        
        .third_column .assessment_results .ai_analysis_content .analysis_details .detail_item {
          padding: 0.75rem;
          background: #f8fafc;
          border-radius: 0.375rem;
          border: 1px solid #e2e8f0;
        }
        
        .third_column .assessment_results .ai_analysis_content .analysis_details .detail_item .detail_header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 0.375rem;
        }
        
        .third_column .assessment_results .ai_analysis_content .analysis_details .detail_item .detail_header .detail_label {
          font-size: 0.625rem;
          font-weight: 600;
          color: #065e42;
        }
        
        .third_column .assessment_results .ai_analysis_content .analysis_details .detail_item .detail_header .detail_value {
          font-size: 0.75rem;
          font-weight: 700;
          color: #065e42;
        }
        
        .third_column .assessment_results .ai_analysis_content .analysis_details .detail_item .detail_description {
          font-size: 0.5625rem;
          color: #64748b;
          line-height: 1.3;
        }
        
        .third_column .assessment_results .ai_analysis_content .analysis_recommendations {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 1rem;
        }
        
        .third_column .assessment_results .ai_analysis_content .analysis_recommendations .recommendation_section .section_header {
          display: flex;
          align-items: center;
          gap: 0.375rem;
          margin-bottom: 0.5rem;
          font-size: 0.6875rem;
          font-weight: 600;
        }
        
        .third_column .assessment_results .ai_analysis_content .analysis_recommendations .recommendation_section .section_header i {
          font-size: 0.75rem;
        }
        
        .third_column .assessment_results .ai_analysis_content .analysis_recommendations .recommendation_section .section_header:first-child {
          color: #065e42;
        }
        
        .third_column .assessment_results .ai_analysis_content .analysis_recommendations .recommendation_section .section_header:last-child {
          color: #d97706;
        }
        
        .third_column .assessment_results .ai_analysis_content .analysis_recommendations .recommendation_section .recommendation_list .recommendation_item {
          display: flex;
          align-items: flex-start;
          gap: 0.5rem;
          padding: 0.375rem 0;
          font-size: 0.625rem;
          line-height: 1.4;
        }
        
        .third_column .assessment_results .ai_analysis_content .analysis_recommendations .recommendation_section .recommendation_list .recommendation_item i {
          flex-shrink: 0;
          margin-top: 0.125rem;
          font-size: 0.625rem;
          color: #065e42;
        }
        
        .third_column .assessment_results .ai_analysis_content .analysis_recommendations .recommendation_section .recommendation_list .recommendation_item.warning i {
          color: #d97706;
        }
        
        .third_column .assessment_results .ai_analysis_content .analysis_recommendations .recommendation_section .recommendation_list .recommendation_item span {
          color: #374151;
        }
        
        /* Plotly modebar 숨기기 */
        .modebar {
          display: none !important;
        }
        
        .modebar--hover {
          display: none !important;
        }
        
                
                /* angularaxistick 스타일 개선 */
                .angularaxistick {
                  font-size: 10px !important;
                  color: rgba(0, 0, 0, 0.7) !important;
                }
                
                .angularaxistick text {
                  font-size: 10px !important;
                  fill: rgba(0, 0, 0, 0.7) !important;
                }
                
                /* xtick, ytick 스타일 개선 */
                .xtick, .ytick {
                  font-size: 9px !important;
                  color: rgba(0, 0, 0, 0.6) !important;
                }
                
                .xtick text, .ytick text {
                  font-size: 9px !important;
                  fill: rgba(0, 0, 0, 0.6) !important;
                }
    </style>
</head>
<body>
    <!-- PDF 헤더 -->
    <div class="pdf-header">
        <!-- 상단 헤더 -->
        <div class="pdf-header-top">
            <div class="pdf-logo-section">
                <div class="pdf-logo">KB</div>
                <div class="pdf-bank-info">
                    <h1>KB국민은행</h1>
                    <p class="bank-subtitle">FinAIssist 여신심사 시스템</p>
                </div>
            </div>
            <div class="pdf-report-info">
                <div class="report-type">여신심사 보고서</div>
                <div class="report-date">{{ report_date }}</div>
            </div>
        </div>
        
        <!-- 메인 정보 섹션 -->
        <div class="pdf-header-main">
            <!-- 고객 정보 -->
            <div class="pdf-customer-section">
                <h3>고객 정보</h3>
                <div class="pdf-customer-info">
                    <div class="pdf-customer-item">
                        <div class="pdf-customer-label">고객명</div>
                        <div class="pdf-customer-value">{{ customer_name }}</div>
                    </div>
                    <div class="pdf-customer-item">
                        <div class="pdf-customer-label">고객 유형</div>
                        <div class="pdf-customer-value">개인 고객</div>
                    </div>
                    <div class="pdf-customer-item">
                        <div class="pdf-customer-label">심사 유형</div>
                        <div class="pdf-customer-value">신용평가</div>
                    </div>
                    <div class="pdf-customer-item">
                        <div class="pdf-customer-label">보고서 번호</div>
                        <div class="pdf-customer-value">KB-{{ report_date|date:'Ymd' }}-001</div>
                    </div>
                </div>
            </div>
            
            <!-- 담당자 정보 -->
            <div class="pdf-officer-section">
                <h3>담당자 정보</h3>
                <div class="pdf-officer-info">
                    <div class="pdf-officer-item">
                        <div class="pdf-officer-label">담당자명</div>
                        <div class="pdf-officer-value">{{ officer_info.name }}</div>
                    </div>
                    <div class="pdf-officer-item">
                        <div class="pdf-officer-label">부서</div>
                        <div class="pdf-officer-value">{{ officer_info.department }}</div>
                    </div>
                    <div class="pdf-officer-item">
                        <div class="pdf-officer-label">직급</div>
                        <div class="pdf-officer-value">{{ officer_info.position }}</div>
                    </div>
                    <div class="pdf-officer-item">
                        <div class="pdf-officer-label">연락처</div>
                        <div class="pdf-officer-value">{{ officer_info.phone }}</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 메인 컨텐츠 (assessment_results와 완전히 동일한 구조) -->
    <div class="third_column">
        <div class="assessment_results">
            <div class="results_header">
                <i class="bi bi-clipboard-check header_icon"></i>
                <span>{{ customer_name }}님의 </span>
                <span>심사 결과</span>
            </div>

            <div class="section_title">전체 평가</div>

            <div class="results_content">
                {{ content|safe }}
            </div>
        </div>
    </div>
    
    <!-- PDF 푸터 -->
    <div class="pdf-footer">
        <p>본 보고서는 KB국민은행 여신심사 시스템에 의해 자동 생성되었습니다.</p>
        <p>문의사항이 있으시면 담당자에게 연락바랍니다.</p>
    </div>
</body>
</html>
