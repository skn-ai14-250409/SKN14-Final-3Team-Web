{% extends 'base.html' %}
{% load static %}

{% block title %}KB국민은행 직원 업무시스템 - 여신 심사사{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/credit_assessment.css' %}">
{% endblock %}

{% block content %}
<!-- 챗봇 컨테이너 -->
<div class="credit_assessment_container">
    <div class="credit_assessment_content">
        <!-- Team Channel Column (팀 채팅) -->
        {% include 'partials/team_channel_column.html' %}
        <div class="second_column">
            <!-- 첫 번째 row - 고객 정보 입력 -->
            <div class="first_row">
                <div class = "credit_assessment_title">
                    <span>여신 심사사</span>
                </div>
                <div class="customer_info_header">
                    <i class="bi bi-person-fill header_icon"></i>
                    <span class="header_title">고객 정보 입력</span>
                    <div class="customer_type_toggle">
                        <button type="button" class="toggle_btn active" data-type="individual">개인</button>
                        <button type="button" class="toggle_btn" data-type="corporate">기업</button>
                    </div>
                </div>
                <div class="customer_info_content">
                    <div class="input_grid">
                        <div class="input_group required">
                            <label for="customer_name">고객명 <span class="error-message" id="customer_name_error"></span></label>
                            <input type="text" id="customer_name" name="customer_name" placeholder="홍길동" required>
                        </div>
                        <div class="input_group required rrn_input">
                            <label for="customer_rrn">주민번호 <span class="error-message" id="customer_rrn_error"></span></label>
                            <input type="text" id="customer_rrn" name="customer_rrn" placeholder="123456-1234567" required>
                        </div>
                        <div class="input_group required phone_input">
                            <label for="customer_phone">연락처 <span class="error-message" id="customer_phone_error"></span></label>
                            <input type="tel" id="customer_phone" name="customer_phone" placeholder="010-1234-5678" required>
                        </div>
                        <div class="input_group">
                            <label for="customer_email">고객 이메일</label>
                            <input type="email" id="customer_email" name="customer_email" placeholder="finaissist1234@kb.com">
                        </div>
                    </div>
                    
                    <!-- 행원 주의사항 -->
                    <div class="banker_notes">
                        <div class="notes_header">
                            <i class="bi bi-exclamation-triangle-fill"></i>
                            <h4>행원 주의사항</h4>
                        </div>
                        <div class="notes_content">
                            <div class="note_item">
                                <i class="bi bi-dot note_icon"></i>
                                <div class="note_text">
                                    <strong>신분증 확인 필수:</strong> 주민번호와 실제 신분증이 일치하는지 반드시 확인하세요.
                                </div>
                            </div>
                            <div class="note_item">
                                <i class="bi bi-dot note_icon"></i>
                                <div class="note_text">
                                    <strong>연락처 검증:</strong> 고객이 실제 사용하는 연락처인지 확인하세요.
                                </div>
                            </div>
                            <div class="note_item">
                                <i class="bi bi-dot note_icon"></i>
                                <div class="note_text">
                                    <strong>개인정보보호:</strong> 고객 정보 입력 시 주변에 다른 고객이 없는지 확인하고, 화면을 보호하세요.
                                </div>
                            </div>
                            <div class="note_item">
                                <i class="bi bi-dot note_icon"></i>
                                <div class="note_text">
                                    <strong>고객 동의:</strong> 정보 수집 및 이용에 대한 고객의 명시적 동의를 받았는지 확인하세요.
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="customer_check_actions">
                        <button type="button" class="btn_check_customer" id="btn_check_customer">
                            <i class="bi bi-search"></i>
                            <span>고객 정보 확인</span>
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- 고객 정보 표시 영역 -->
            <div class="customer_info_display" id="customer_info_display" style="display: none;">
                <div class="customer_display_header">
                    <i class="bi bi-person-check-fill header_icon"></i>
                    <span>고객 정보</span>
                </div>
                <div class="customer_display_content" id="customer_display_content">
                    <!-- 고객 정보가 여기에 동적으로 표시됩니다 -->
                </div>
            </div>
            
            <!-- 두 번째 row - 대출 정보 입력 -->
            <div class="second_row" id="second_row" style="display: none;">
                <div class="loan_info_header">
                    <i class="bi bi-credit-card-fill header_icon"></i>
                    <span>대출 정보</span>
                </div>
                <div class="loan_info_notice">
                    <i class="bi bi-info-circle"></i>
                    <span>고객 정보 확인 후 대출 정보를 입력해주세요</span>
                </div>
                <div class="loan_info_notice_secondary">
                    <i class="bi bi-arrow-down"></i>
                    <span>대출 정보 입력 완료 후 심사 요청 버튼이 나타납니다</span>
                </div>
                <div class="loan_info_content">
                    <div class="input_grid">
                        <div class="input_group required">
                            <label for="loan_amount">대출 신청 금액</label>
                            <input type="number" id="loan_amount" name="loan_amount" placeholder="10,000,000" required>
                        </div>
                        <div class="input_group required">
                            <label for="loan_purpose">대출 목적</label>
                            <select id="loan_purpose" name="loan_purpose" required>
                                <option value="">선택하세요</option>
                                <option value="house">주택 구매</option>
                                <option value="business">사업자금</option>
                                <option value="education">교육비</option>
                                <option value="medical">의료비</option>
                                <option value="living">생활비</option>
                                <option value="other">기타</option>
                            </select>
                        </div>
                        <div class="input_group required">
                            <label for="loan_product">대출 상품</label>
                            <select id="loan_product" name="loan_product" required>
                                <option value="">대출 목적을 먼저 선택하세요</option>
                            </select>
                        </div>
                        <div class="input_group">
                            <label for="employment_type">고용 형태</label>
                            <select id="employment_type" name="employment_type">
                                <option value="">선택하세요</option>
                                <option value="regular">정규직</option>
                                <option value="contract">계약직</option>
                                <option value="temporary">임시직</option>
                                <option value="freelance">프리랜서</option>
                                <option value="business">사업자</option>
                                <option value="unemployed">무직</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 세 번째 row - 심사 요청 버튼 -->
            <div class="third_row" id="third_row" style="display: none;">
                <div class="assessment_actions">
                    <button class="btn_assess" id="btn_assess">
                        <i class="bi bi-clipboard-check"></i>
                        <span>여신 심사 요청</span>
                    </button>
                    <button class="btn_reset" id="btn_reset">
                        <i class="bi bi-arrow-clockwise"></i>
                        <span>초기화</span>
                    </button>
                </div>
            </div>
        </div>
        <div class="third_column">
            <!-- 심사 결과 표시 영역 -->
            <div class="assessment_results" id="assessment_results" style="display: none;">
                <div class="results_header">
                    <i class="bi bi-clipboard-check header_icon"></i>
                    <span>심사 결과</span>
                </div>
                <div class="results_content" id="results_content">
                    <!-- 심사 결과가 여기에 동적으로 표시됩니다 -->
                </div>
            </div>
        </div>
        <div class="fourth_column">
            <!-- 저장된 보고서 목록 -->
            <div class="saved_reports_column">
                <!-- 보고서 컬럼 헤더 -->
                <div class="reports_column_header">
                    <div class="report_upload_section">
                        <div class="report_icon">
                            <i class="bi bi-file-earmark-text-fill"></i>
                        </div>
                        <div class="report_upload_title">보고서 생성</div>
                        <div class="report_upload_shortcut">Ctrl + R</div>
                    </div>
                    
                    <div class="report_search_section">
                        <div class="search_icon">
                            <i class="bi bi-search"></i>
                        </div>
                        <div class="report_search_title">보고서 검색</div>
                        <div class="report_search_shortcut">Ctrl + F</div>
                    </div>
                </div>

                <!-- 통합 보고서 섹션 -->
                <div class="unified_reports_section">
                    <div class="unified_reports_header">
                        <div class="unified_reports_title">보고서 목록</div>
                        <div class="report_count">6개</div>
                    </div>
                    
                    <div class="unified_reports_list">
                        <!-- 최근 보고서 (상단) -->
                        <div class="report_item recent">
                            <div class="report_thumbnail">
                                <i class="bi bi-file-earmark-text"></i>
                            </div>
                            <div class="report_info">
                                <div class="report_name">이수민_보고서.txt</div>
                                <div class="report_meta">
                                    <span class="report_type">개인</span>
                                    <span class="report_date">08/24 15:24</span>
                                </div>
                                <div class="report_preview">개인 고객 신용도 평가 완료. 신용점수 785점, A등급으로 대출 승인 권장...</div>
                            </div>
                            <div class="report_actions">
                                <div class="action_icon">
                                    <i class="bi bi-download"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="report_item recent">
                            <div class="report_thumbnail">
                                <i class="bi bi-file-earmark-text"></i>
                            </div>
                            <div class="report_info">
                                <div class="report_name">김영식_보고서.txt</div>
                                <div class="report_meta">
                                    <span class="report_type">개인</span>
                                    <span class="report_date">08/24 14:15</span>
                                </div>
                                <div class="report_preview">기업 대출 심사 결과. 매출 안정성 양호, 상환능력 검토 필요...</div>
                            </div>
                            <div class="report_actions">
                                <div class="action_icon">
                                    <i class="bi bi-download"></i>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 저장된 보고서 (하단) -->
                        <div class="report_item saved">
                            <div class="report_thumbnail">
                                <i class="bi bi-file-earmark-text"></i>
                            </div>
                            <div class="report_info">
                                <div class="report_name">조성택_보고서.txt</div>
                                <div class="report_meta">
                                    <span class="report_type">개인</span>
                                    <span class="report_date">08/24 13:08</span>
                                </div>
                            </div>
                            <div class="report_actions">
                                <div class="action_icon">
                                    <i class="bi bi-download"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="report_item saved">
                            <div class="report_thumbnail">
                                <i class="bi bi-file-earmark-text"></i>
                            </div>
                            <div class="report_info">
                                <div class="report_name">이승택_보고서.txt</div>
                                <div class="report_meta">
                                    <span class="report_type">개인</span>
                                    <span class="report_date">08/24 12:45</span>
                                </div>
                            </div>
                            <div class="report_actions">
                                <div class="action_icon">
                                    <i class="bi bi-download"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="report_item saved">
                            <div class="report_thumbnail">
                                <i class="bi bi-file-earmark-text"></i>
                            </div>
                            <div class="report_info">
                                <div class="report_name">박민수_보고서.txt</div>
                                <div class="report_meta">
                                    <span class="report_type">기업</span>
                                    <span class="report_date">08/24 11:30</span>
                                </div>
                            </div>
                            <div class="report_actions">
                                <div class="action_icon">
                                    <i class="bi bi-download"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div class="report_item saved">
                            <div class="report_thumbnail">
                                <i class="bi bi-file-earmark-text"></i>
                            </div>
                            <div class="report_info">
                                <div class="report_name">최지영_보고서.txt</div>
                                <div class="report_meta">
                                    <span class="report_type">개인</span>
                                    <span class="report_date">08/24 10:15</span>
                                </div>
                            </div>
                            <div class="report_actions">
                                <div class="action_icon">
                                    <i class="bi bi-download"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 보고서 컬럼 푸터 -->
                <div class="reports_column_footer">
                    <div class="report_viewer_section">
                        <div class="viewer_icon">
                            <i class="bi bi-file-earmark-text"></i>
                        </div>
                        <div class="report_viewer_title">보고서 저장</div>
                    </div>
                    <div class="report_management_section">
                        <div class="management_icon">
                            <i class="bi bi-folder2-open"></i>
                        </div>
                        <div class="report_management_title">보고서 관리</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/partials/team_channel_column.js' %}"></script>
<script src="{% static 'js/credit_assessment/credit_assessment.js' %}"></script>
{% endblock %}




